<!-- word-relay.html -->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ã—ã‚Šã¨ã‚Šã‚²ãƒ¼ãƒ </title>

  <!-- CSS -->
  <link rel="stylesheet" href="./css/mian.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reset-css@5.0.1/reset.min.css" />

</head>
<!--------------------------------- body --------------------------------->

<body>
<div class="container">
  <!-- order -->
  <div>
    <span id="order"> 1 </span>ç•ªç›®ã®å‚åŠ è€…
  </div>

  <!-- word -->
  <div>
    æç¤ºèª: <span id="word"></span> 
  </div>

  <!-- input -->
  <input type="text" placeholder="ã²ã‚‰ãŒãªã®ã¿å…¥åŠ›ã—ã¦ä¸‹ã•ã„ï¼">
  <button>å…¥åŠ›</button>
</div>

  <!------------------------------ Javascript ------------------------------>
  <script>

  // â€» querySelector â€»
    const number = Number(prompt('ä½•åæ§˜ã§ã„ã‚‰ã£ã—ã‚ƒã„ã¾ã™ã‹ï¼Ÿ'));
    const $button = document.querySelector('button');
    const $input = document.querySelector('input');
    const $word = document.querySelector('#word');
    const $order = document.querySelector('#order');

  // â€» å¤‰æ•°è¨­å®š â€»
    let word; // ğŸŸ¢ æç¤ºèªã€€->äººã€…ãŒå˜èªã‚’å…¥åŠ›ã™ã‚‹ãŸã³ã«å¤‰ã‚ã‚‹ã®ã§ "let"ã§è¨­å®š
    let newWord; // ğŸŸ¡ ç¾åœ¨å˜èª


  // â€» ãƒãƒ³ãƒ‰ãƒ© â€»
    // 1. ãƒãƒ³ãƒ‰ãƒ©__onClickButton
    const onClickButton = () => {
      // 1. æç¤ºèªãŒç©ºã„ã¦ã„ã‚‹ã®ã‹ã„â“

      // 1.1. ç©ºã„ã¦ã„ã‚‹
      if (!word) {
      //ğŸŸ¢ <- ğŸŸ¡
        word = newWord; // ğŸŸ¡ å…¥åŠ›ã—ãŸå˜èªãŒæç¤ºèªï¼ˆ'word'ï¼‰ã«ãªã‚‹
        $word.textContent = word; //ç”»é¢ã«æç¤ºèªã‚’è¡¨ã™

        const order = Number($order.textContent); // é †ç•ªãƒã‚§ãƒƒã‚¯

        // 1.1.1. ï¼”äººç›®ä»¥ä¸Šãªã‚‰ã€åˆæœŸåŒ–ã•ã›ã‚‹
        if (order+1 > number) {
          $order.textContent = 1; //ã€€æœ€åˆã®äººã«å›ã™

          // 1.1.2. 3äººç›®ä»¥ä¸‹ãªã‚‰ã€ç¶šã‘ã‚‹
        } else {
          $order.textContent = order + 1; // æ¬¡ã‚“äººã«å›ã™
        }

        //ã€€inputã®åˆæœŸåŒ–
        $input.value= '';
        $input.focus();

      // 1.2. ç©ºã„ã¦ãªã„ 
      } else {

        // 1.2.1. èªå°¾ãŒåŒã˜ãªã®ã‹ï¼Ÿ
        if (word[word.length - 1] === newWord[0]) {
          word = newWord; // ä»Šã®å˜èªã‚’æç¤ºèªã«å…¥ã‚Œã‚‹
          $word.textContent = word; //ç”»é¢ã«æç¤ºèªã‚’è¡¨ã™

          const order = Number($order.textContent); // é †ç•ªãƒã‚§ãƒƒã‚¯

          // 1.2.1.1 ï¼”äººç›®ä»¥ä¸Šãªã‚‰ã€åˆæœŸåŒ–ã•ã›ã‚‹
          if (order + 1 > number) {
            $order.textContent = 1;

          // 1.2.1.2. 3äººç›®ä»¥ä¸‹ãªã‚‰ã€ç¶šã‘ã‚‹
          } else {
            $order.textContent = order + 1;
          }

          //ã€€inputã®åˆæœŸåŒ–
          $input.value = '';
          $input.focus();
          
        // 1.2.2. èªå°¾ãŒé•ã†ã®ã‹ï¼Ÿ
        } else {
          alert('å˜èªãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ï¼');

          //ã€€inputã®åˆæœŸåŒ–
          $input.value = '';
          $input.focus();
        }
      }
    };

    // 2. ãƒãƒ³ãƒ‰ãƒ©__onInput
    const onInput = (event) => {
      newWord = event.target.value; // ğŸŸ¡å…¥åŠ›ã™ã‚‹å˜èªã‚’ç¾åœ¨å˜èªã«å…¥ã‚Œã‚ˆã†
    };

    $button.addEventListener('click', onClickButton);
    $input.addEventListener('input', onInput);


  </script>
</body>

</html>